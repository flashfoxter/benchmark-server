{"ts":1354603344095,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1354603343238,"patch":[[{"diffs":[[1,"extends layout\r\n\r\nblock content\r\n\r\n  script(type='text/javascript')\r\n    var aUsedMemoryData = [],\r\n      aFreeMemoryData = [],\r\n      aTotalMemoryData = [],\r\n      aMemoryUsageData = [],\r\n      aLoadAverageData = [],\r\n      aUserCpuUsageData = [],\r\n      aSystemCpuUsageData = [];\r\n\r\n    var background = {\r\n        type: 'linearGradient',\r\n        x0: 0,\r\n        y0: 0,\r\n        x1: 0,\r\n        y1: 1,\r\n        colorStops: [{ offset: 0, color: '#d2e6c9' },\r\n                     { offset: 1, color: 'white'}]\r\n    };\r\n\r\n    var i;\r\n    for(i=0; i<100; i++){\r\n      aUsedMemoryData.push([i, 0]);\r\n      aFreeMemoryData.push([i, 0]);\r\n      aTotalMemoryData.push([i, 0]);\r\n      aMemoryUsageData.push([i, 0]);\r\n      aLoadAverageData.push([i, 0]);\r\n      aUserCpuUsageData.push([i, 0]);\r\n      aSystemCpuUsageData.push([i, 0]);\r\n    }\r\n\r\n    $(document).ready(function(){\r\n      $('#used-memory').jqChart({\r\n        title: {text: 'Memory'},\r\n        background: background,\r\n        series: [\r\n          {\r\n            //type: 'line',\r\n            type: 'spline',\r\n            title : 'Total(Mb)',\r\n            data: aTotalMemoryData,\r\n            markers: { type: 'circle', size: 3 }\r\n          },\r\n          {\r\n            //type: 'line',\r\n            type: 'spline',\r\n            title : 'Used(Mb)',\r\n            data: aUsedMemoryData,\r\n            markers: { type: 'circle', size: 3 }\r\n          },\r\n          {\r\n            //type: 'line',\r\n            type: 'spline',\r\n            title : 'Free(Mb)',\r\n            data: aFreeMemoryData,\r\n            markers: { type: 'circle', size: 3 }\r\n          }\r\n        ]\r\n      });\r\n      $('#memory-usage').jqChart({\r\n        title: {text: 'Memory Usage'},\r\n        background: background,\r\n        series: [\r\n          {\r\n            type: 'spline',\r\n            title : '%',\r\n            data: aMemoryUsageData,\r\n            markers: { type: 'circle', size: 3 }\r\n          }\r\n        ]\r\n      });\r\n      $('#load-average').jqChart({\r\n        title: {text: 'Load Average'},\r\n        background: background,\r\n        series: [\r\n          {\r\n            type: 'spline',\r\n            title : 'Avr',\r\n            data: aLoadAverageData,\r\n            markers: { type: 'circle', size: 3 }\r\n          }\r\n        ]\r\n      });\r\n      $('#cpu-usage').jqChart({\r\n        title: {text: 'Cpu Usage'},\r\n        background: background,\r\n        series: [\r\n          {\r\n            type: 'spline',\r\n            title : 'User(%)',\r\n            data: aUserCpuUsageData,\r\n            markers: { type: 'circle', size: 3 }\r\n          },\r\n           {\r\n            type: 'spline',\r\n            title : 'System(%)',\r\n            data: aSystemCpuUsageData,\r\n            markers: { type: 'circle', size: 3 }\r\n          }\r\n        ]\r\n      });\r\n\r\n      //var oSocket = io.connect('http://localhost:15030');\r\n      //var oSocket = io.connect('http://10.67.19.139:15030');\r\n      var oSocket = io.connect('http://125.209.205.24:15030');\r\n      oSocket.on('connect', function(htData){\r\n        console.log('connect');\r\n      });\r\n      oSocket.on('pushServerInfo', function(htData){\r\n        console.log(htData);\r\n      });\r\n      oSocket.on('pushMonitoringData', function(htData){\r\n        var nUsedMemory = htData.nUsedMemory,\r\n          nFreeMemory = htData.nFreeMemory,\r\n          nTotalMemory = htData.nTotalMemory,\r\n          nMemoryUsage = htData.nMemoryUsage,\r\n          nLoadAverage = htData.nLoadAverage,\r\n          nUserCpuUsage = htData.nUserCpuUsage,\r\n          nSystemCpuUsage = htData.nSystemCpuUsage;\r\n\r\n        aUsedMemoryData.splice(0, 1);\r\n        aUsedMemoryData.push([i++, nUsedMemory]);\r\n        aFreeMemoryData.splice(0, 1);\r\n        aFreeMemoryData.push([i++, nFreeMemory]);\r\n        aTotalMemoryData.splice(0, 1);\r\n        aTotalMemoryData.push([i++, nTotalMemory]);\r\n        aMemoryUsageData.splice(0, 1);\r\n        aMemoryUsageData.push([i++, nMemoryUsage]);\r\n        aLoadAverageData.splice(0, 1);\r\n        aLoadAverageData.push([i++, nLoadAverage]);\r\n        aUserCpuUsageData.splice(0, 1);\r\n        aUserCpuUsageData.push([i++, nUserCpuUsage]);\r\n        aSystemCpuUsageData.splice(0, 1);\r\n        aSystemCpuUsageData.push([i++, nSystemCpuUsage]);\r\n\r\n        $('#used-memory').jqChart('update');\r\n        $('#memory-usage').jqChart('update');\r\n        $('#cpu-usage').jqChart('update');\r\n        $('#load-average').jqChart('update');\r\n      })\r\n    });\r\n\r\n  div(id='used-memory', style='width:50%;height:300px;float:left');\r\n  div(id='memory-usage', style='width:50%;height:300px;float:left');\r\n  div(id='cpu-usage', style='width:50%;height:300px;float:left');\r\n  div(id='load-average', style='width:50%;height:300px;float:left');"]],"start1":0,"start2":0,"length1":0,"length2":4678}]],"length":4678,"saved":false}
{"ts":1354603462950,"patch":[[{"diffs":[[0,"   });\r\n\r\n      "],[-1,"//"],[0,"var oSocket = io"]],"start1":2760,"start2":2760,"length1":34,"length2":32},{"diffs":[[0,"p://"],[-1,"localhost:15030');\r\n      //var oSocket = io.connect('http://10.67.19.139:15030');\r\n      var oSocket = io.connect('http://125.209.205.24:15030"],[1,"#{sHostname}"],[0,"');\r"]],"start1":2805,"start2":2805,"length1":151,"length2":20}]],"length":4545,"saved":false}
{"ts":1354604880720,"patch":[[{"diffs":[[0,"0px;float:left')"],[-1,";"],[0,"\r\n  div(id='memo"]],"start1":4321,"start2":4321,"length1":33,"length2":32},{"diffs":[[0,"0px;float:left')"],[-1,";"],[0,"\r\n  div(id='cpu-"]],"start1":4390,"start2":4390,"length1":33,"length2":32},{"diffs":[[0,"t:left')"],[-1,";"],[0,"\r\n  div("]],"start1":4464,"start2":4464,"length1":17,"length2":16},{"diffs":[[0,"t:left')"],[-1,";"]],"start1":4533,"start2":4533,"length1":9,"length2":8}]],"length":4541,"saved":false}
